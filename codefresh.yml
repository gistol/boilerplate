version: '1.0'
steps:
  build-fpm-image:
    type: build
    description: Build the fpm image
    dockerfile: Dockerfile
    image-name: majisti/fpm
    working-directory: ${{initial-clone}}/docker/fpm
    tag: 7.0.11.0

  push-fpm-image:
    type: push
    candidate: ${{build-fpm-image}}
    tag: 7.0.11.0

  build-node-image:
    type: build
    description: Build the node image
    dockerfile: Dockerfile
    image-name: majisti/node
    working-directory: ${{initial-clone}}/docker/node
    tag: 5.0.0.1

  push-node-image:
    type: push
    candidate: ${{build-node-image}}
    tag: 5.0.0.1

  build-php-image:
    type: build
    description: Build the php image
    dockerfile: Dockerfile
    image-name: majisti/php-cli
    working-directory: ${{initial-clone}}/docker/php
    tag: 7.0.11.0

  push-php-image:
    type: push
    candidate: ${{build-php-image}}
    tag: 7.0.11.0

  build-ruby-image:
    type: build
    description: Build the ruby image
    dockerfile: Dockerfile
    image-name: majisti/ruby
    working-directory: ${{initial-clone}}/docker/ruby
    tag: 1.9.3.0

  push-ruby-image:
    type: push
    candidate: ${{build-ruby-image}}
    tag: 1.9.3.0

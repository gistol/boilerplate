version: '1.0'
steps:
  build-fpm-image:
    type: build
    description: Build the fpm image
    dockerfile: Dockerfile
    image-name: majisti/fpm
    working-directory: ${{initial-clone}}/docker/fpm
    tag: experimentcodefresh

  push-fpm-image:
    type: push
    candidate: ${{build-fpm-image}}
    tag: experimentcodefresh

  build-nginx-image:
    type: build
    description: Build the nginx image
    dockerfile: Dockerfile
    image-name: majisti/nginx
    working-directory: ${{initial-clone}}/docker/nginx
    tag: experimentcodefresh

  push-nginx-image:
    type: push
    candidate: ${{build-nginx-image}}
    tag: experimentcodefresh

  build-node-image:
    type: build
    description: Build the node image
    dockerfile: Dockerfile
    image-name: majisti/node
    working-directory: ${{initial-clone}}/docker/node
    tag: experimentcodefresh

  push-node-image:
    type: push
    candidate: ${{build-node-image}}
    tag: experimentcodefresh

  build-php-image:
    type: build
    description: Build the php image
    dockerfile: Dockerfile
    image-name: majisti/php-cli
    working-directory: ${{initial-clone}}/docker/php
    tag: experimentcodefresh

  push-php-image:
    type: push
    candidate: ${{build-php-image}}
    tag: experimentcodefresh

  build-ruby-image:
    type: build
    description: Build the ruby image
    dockerfile: Dockerfile
    image-name: majisti/ruby
    working-directory: ${{initial-clone}}/docker/ruby
    tag: experimentcodefresh

  push-ruby-image:
    type: push
    candidate: ${{build-ruby-image}}
    tag: experimentcodefresh
